/*!
 * jQuery Form Plugin
 * version: 2.69 (06-APR-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
!function(y){function T(e,t){var r;if(function(e){void 0===Array.isArray&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});return Array.isArray(e)}(e))for(r=0;r<e.length;r++)t(r);else for(r in e)t(r)}function j(){if(y.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}y.fn.ajaxSubmit=function(b){if(!this.length)return j("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof b&&(b={success:b});var e=this.attr("action"),t="string"==typeof e?y.trim(e):"";t&&(t=(t.match(/^([^#]+)/)||[])[1]),t=t||window.location.href||"",b=y.extend(!0,{url:t,success:y.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var r={};if(this.trigger("form-pre-serialize",[this,b,r]),r.veto)return j("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return j("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a,n=this.formToArray(b.semantic);if(b.data&&(b.extraData=b.data,T(b.data,function(t){b.data[t]instanceof Array?T(b.data[t],function(e){n.push({name:t,value:b.data[t][e]})}):(a=b.data[t],a=y.isFunction(a)?a():a,n.push({name:t,value:a}))})),b.beforeSubmit&&!1===b.beforeSubmit(n,this,b))return j("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[n,this,b,r]),r.veto)return j("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var i=y.param(n);"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+i,b.data=null):b.data=i;var x=this,o=[];if(b.resetForm&&o.push(function(){x.resetForm()}),b.clearForm&&o.push(function(){x.clearForm()}),!b.dataType&&b.target){var s=b.success||function(){};o.push(function(e){var t=b.replaceTarget?"replaceWith":"html";y(b.target)[t](e).each(s,arguments)})}else b.success&&o.push(b.success);b.success=function(e,t,r){for(var a=b.context||b,n=0,i=o.length;n<i;n++)o[n].apply(a,[e,t,r||x,x])};var l=0<y("input:file",this).length,c="multipart/form-data",u=x.attr("enctype")==c||x.attr("encoding")==c;return!1!==b.iframe&&(l||b.iframe||u)?b.closeKeepAlive?y.get(b.closeKeepAlive,f):f():y.ajax(b),this.trigger("form-submit-notify",[this,b]),this;function f(){var a=x[0];if(y(":input[name=submit],:input[id=submit]",a).length)alert('Error: Form elements must not have name or id of "submit".');else{var s=y.extend(!0,{},y.ajaxSettings,b);s.context=s.context||s;var n="jqFormIO"+(new Date).getTime(),l=y('<iframe id="'+n+'" name="'+n+'" src="'+s.iframeSrc+'" />'),c=l[0];l.css({position:"absolute",top:"-1000px",left:"-1000px"});var u={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){j("aborting upload...");var e="aborted";this.aborted=1,l.attr("src",s.iframeSrc),u.error=e,s.error&&s.error.call(s.context,u,"error",e),f&&y.event.trigger("ajaxError",[u,s,e]),s.complete&&s.complete.call(s.context,u,"error")}},f=s.global;if(f&&!y.active++&&y.event.trigger("ajaxStart"),f&&y.event.trigger("ajaxSend",[u,s]),s.beforeSend&&!1===s.beforeSend.call(s.context,u,s))s.global&&y.active--;else if(!u.aborted){var m=0,e=a.clk;if(e){var t=e.name;t&&!e.disabled&&(s.extraData=s.extraData||{},s.extraData[t]=e.value,"image"==e.type&&(s.extraData[t+".x"]=a.clk_x,s.extraData[t+".y"]=a.clk_y))}s.forceSync?r():setTimeout(r,10);var d,p=50,h=y.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},o=y.parseJSON||function(e){return window.eval("("+e+")")},v=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n="xml"===t||!t&&0<=a.indexOf("xml"),i=n?e.responseXML:e.responseText;return n&&"parsererror"===i.documentElement.nodeName&&y.error&&y.error("parsererror"),r&&r.dataFilter&&(i=r.dataFilter(i,t)),"string"==typeof i&&("json"===t||!t&&0<=a.indexOf("json")?i=o(i):("script"===t||!t&&0<=a.indexOf("javascript"))&&y.globalEval(i)),i}}}function r(){var e=x.attr("target"),t=x.attr("action");a.setAttribute("target",n),"POST"!=a.getAttribute("method")&&a.setAttribute("method","POST"),a.getAttribute("action")!=s.url&&a.setAttribute("action",s.url),s.skipEncodingOverride||x.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&setTimeout(function(){m=!0,g()},s.timeout);var r=[];try{s.extraData&&T(s.extraData,function(e){r.push(y('<input type="hidden" name="'+e+'" value="'+s.extraData[e]+'" />').appendTo(a)[0])}),l.appendTo("body"),c.attachEvent?c.attachEvent("onload",g):c.addEventListener("load",g,!1),a.submit()}finally{a.setAttribute("action",t),e?a.setAttribute("target",e):x.removeAttr("target"),y(r).remove()}}function g(){if(!u.aborted){var e=c.contentWindow?c.contentWindow.document:c.contentDocument?c.contentDocument:c.document;if(e&&e.location.href!=s.iframeSrc||m){c.detachEvent?c.detachEvent("onload",g):c.removeEventListener("load",g,!1);var t=!0;try{if(m)throw"timeout";var r="xml"==s.dataType||e.XMLDocument||y.isXMLDoc(e);if(j("isXml="+r),!r&&window.opera&&(null==e.body||""==e.body.innerHTML)&&--p)return j("requeing onLoad callback, DOM not available"),void setTimeout(g,250);u.responseText=e.body?e.body.innerHTML:e.documentElement?e.documentElement.innerHTML:null,u.responseXML=e.XMLDocument?e.XMLDocument:e,u.getResponseHeader=function(e){return{"content-type":s.dataType}[e]};var a=/(json|script)/.test(s.dataType);if(a||s.textarea){var n=e.getElementsByTagName("textarea")[0];if(n)u.responseText=n.value;else if(a){var i=e.getElementsByTagName("pre")[0],o=e.getElementsByTagName("body")[0];i?u.responseText=i.textContent:o&&(u.responseText=o.innerHTML)}}else"xml"!=s.dataType||u.responseXML||null==u.responseText||(u.responseXML=h(u.responseText));d=v(u,s.dataType,s)}catch(e){j("error caught:",e),t=!1,u.error=e,s.error&&s.error.call(s.context,u,"error",e),f&&y.event.trigger("ajaxError",[u,s,e])}u.aborted&&(j("upload aborted"),t=!1),t&&(s.success&&s.success.call(s.context,d,"success",u),f&&y.event.trigger("ajaxSuccess",[u,s])),f&&y.event.trigger("ajaxComplete",[u,s]),f&&!--y.active&&y.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,u,t?"success":"error"),setTimeout(function(){l.removeData("form-plugin-onload"),l.remove(),u.responseXML=null},100)}}}}},y.fn.ajaxForm=function(t){if(0===this.length){var e={s:this.selector,c:this.context};return!y.isReady&&e.s?(j("DOM not ready, queuing ajaxForm"),y(function(){y(e.s,e.c).ajaxForm(t)})):j("terminating; zero elements found by selector"+(y.isReady?"":" (DOM not ready)")),this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.isDefaultPrevented()||(e.preventDefault(),y(this).ajaxSubmit(t))}).bind("click.form-plugin",function(e){var t=e.target,r=y(t);if(!r.is(":submit,input:image")){var a=r.closest(":submit");if(0==a.length)return;t=a[0]}var n=this;if("image"==(n.clk=t).type)if(null!=e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof y.fn.offset){var i=r.offset();n.clk_x=e.pageX-i.left,n.clk_y=e.pageY-i.top}else n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})},y.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},y.fn.formToArray=function(e){var t=[];if(0===this.length)return t;var r,a,n,i,o,s,l,c=this[0],u=e?c.getElementsByTagName("*"):c.elements;if(!u)return t;for(r=0,s=u.length;r<s;r++)if(n=(o=u[r]).name)if(e&&c.clk&&"image"==o.type)o.disabled||c.clk!=o||(t.push({name:n,value:y(o).val()}),t.push({name:n+".x",value:c.clk_x},{name:n+".y",value:c.clk_y}));else if((i=y.fieldValue(o,!0))&&i.constructor==Array)for(a=0,l=i.length;a<l;a++)t.push({name:n,value:i[a]});else null!=i&&t.push({name:n,value:i});if(!e&&c.clk){var f=y(c.clk),m=f[0];(n=m.name)&&!m.disabled&&"image"==m.type&&(t.push({name:n,value:f.val()}),t.push({name:n+".x",value:c.clk_x},{name:n+".y",value:c.clk_y}))}return t},y.fn.formSerialize=function(e){return y.param(this.formToArray(e))},y.fn.fieldSerialize=function(n){var i=[];return this.each(function(){var e=this.name;if(e){var t=y.fieldValue(this,n);if(t&&t.constructor==Array)for(var r=0,a=t.length;r<a;r++)i.push({name:e,value:t[r]});else null!=t&&i.push({name:this.name,value:t})}}),y.param(i)},y.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],i=y.fieldValue(n,e);null==i||i.constructor==Array&&!i.length||(i.constructor==Array?y.merge(t,i):t.push(i))}return t},y.fieldValue=function(e,t){var r=e.name,a=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==n&&-1==e.selectedIndex))return null;if("select"==n){var i=e.selectedIndex;if(i<0)return null;for(var o=[],s=e.options,l="select-one"==a,c=l?i+1:s.length,u=l?i:0;u<c;u++){var f=s[u];if(f.selected){var m=f.value;if(m||(m=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),l)return m;o.push(m)}}return o}return y(e).val()},y.fn.clearForm=function(){return this.each(function(){y("input,select,textarea",this).clearFields()})},y.fn.clearFields=y.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},y.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},y.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},y.fn.selected=function(r){return void 0===r&&(r=!0),this.each(function(){var e=this.type;if("checkbox"==e||"radio"==e)this.checked=r;else if("option"==this.tagName.toLowerCase()){var t=y(this).parent("select");r&&t[0]&&"select-one"==t[0].type&&t.find("option").selected(!1),this.selected=r}})}}(jQuery);
